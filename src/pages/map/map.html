<!--
    Copyright (c)  Université catholique Louvain.  All rights reserved
    Authors :  Jérôme Lemaire, Corentin Lamy, Daubry Benjamin & Marchesini Bruno
    Date : July 2018
    This file is part of UCLCampus
    Licensed under the GPL 3.0 license. See LICENSE file in the project root for full license information.

    UCLCampus is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    UCLCampus is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with UCLCampus.  If not, see <http://www.gnu.org/licenses/>.
-->
<!--EN-TETE-->
<ion-header>
  <ion-toolbar color="map">
    <ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </ion-button>
    <img alt="Icon" height="28" src="./assets/img/s.png"/>
    <ion-title align="center">{{title | translate}}</ion-title>
  </ion-toolbar>
</ion-header>

<!--BODY-->
<ion-content>
  <div *ngIf="searching" class="spinner-container">
    <ion-spinner></ion-spinner>
  </div>
  <div #pleaseConnect id="please-connect">
    <p> {{'MAP.NET' | translate}}</p>
  </div>
  <div id="container">
    <div #map id="map"></div>
  </div>

  <ion-card *ngFor="let zone of zones" overflow-scroll=false>

    <ion-item-divider (click)="toggleDetails(zone.auditoires)">
      <ion-label>{{'MAP.AUDIT' | translate}}</ion-label>
    </ion-item-divider>

    <ion-item *ngFor="let auditoire of zone.auditoires.list, let i=index" [hidden]="!zone.auditoires.showDetails">
      <ion-label>
        <ion-button (click)="toggleLocation(auditoire, zone.auditoires.listChecked, i)">
          <h3>{{auditoire.title}} {{auditoire.sigle}}</h3>
          <p>{{auditoire.address}}</p>
        </ion-button>
      </ion-label>
    </ion-item>

    <ion-item-divider (click)="toggleDetails(zone.bibliotheques)">
      <ion-label>{{'MAP.LIBRARY' | translate}}</ion-label>
    </ion-item-divider>

    <ion-item *ngFor="let bibli of zone.bibliotheques.list, let i=index" [hidden]="!zone.bibliotheques.showDetails">
      <ion-label>
        <ion-button (click)="toggleLocation(bibli, zone.bibliotheques.listChecked, i)">
          <h3>{{bibli.title}} {{bibli.sigle}}</h3>
          <p>{{bibli.address}}</p>
        </ion-button>
      </ion-label>
    </ion-item>

    <ion-item-divider (click)="toggleDetails(zone.locaux)">
      <ion-label>{{'MAP.LOC' | translate}}</ion-label>
    </ion-item-divider>

    <ion-item *ngFor="let loc of zone.locaux.list, let i=index" [hidden]="!zone.locaux.showDetails">
      <ion-label>
        <ion-button (click)="toggleLocation(loc, zone.locaux.listChecked, i)">
          <h3>{{loc.title}}</h3>
        </ion-button>
      </ion-label>
    </ion-item>

    <ion-item-divider (click)="toggleDetails(zone.sports)">
      <ion-label>{{'MAP.SPORT' | translate}}</ion-label>
    </ion-item-divider>

    <ion-item *ngFor="let sport of zone.sports.list, let i=index" [hidden]="!zone.sports.showDetails">
      <ion-label>
        <ion-button (click)="toggleLocation(sport, zone.sports.listChecked, i)">
          <h3>{{sport.title}}</h3>
          <p>{{sport.address}}</p>
        </ion-button>
      </ion-label>
    </ion-item>

    <ion-item-divider (click)="toggleDetails(zone.restaurants_universitaires)">
      <ion-label>{{'MAP.REST' | translate}}</ion-label>
    </ion-item-divider>

    <ion-item *ngFor="let restau of zone.restaurants_universitaires.list, let i=index"
              [hidden]="!zone.restaurants_universitaires.showDetails">
      <ion-label>
        <ion-button (click)="toggleLocation(restau, zone.restaurants_universitaires.listChecked, i)">
          <h3>{{restau.title}}</h3>
          <p>{{restau.address}}</p>
        </ion-button>
      </ion-label>
    </ion-item>

    <ion-item-divider (click)="toggleDetails(zone.services)">
      <ion-label>{{'MAP.SERV' | translate}}</ion-label>
    </ion-item-divider>

    <ion-item *ngFor="let service of zone.services.list, let i=index" [hidden]="!zone.services.showDetails">
      <ion-label>
        <ion-button (click)="toggleLocation(service, zone.services.listChecked, i)">
          <h3>{{service.title}}</h3>
          <p>{{service.address}}</p>
        </ion-button>
      </ion-label>
    </ion-item>

    <ion-item-divider (click)="toggleDetails(zone.parkings)">
      <ion-label>{{'MAP.PARK' | translate}}</ion-label>
    </ion-item-divider>

    <ion-item *ngFor="let parking of zone.parkings.list, let i=index" [hidden]="!zone.parkings.showDetails">
      <ion-label>
        <ion-button (click)="toggleLocation(parking, zone.parkings.listChecked, i)">
          <h3>{{parking.title}}</h3>
        </ion-button>
      </ion-label>
    </ion-item>
  </ion-card>
</ion-content>
