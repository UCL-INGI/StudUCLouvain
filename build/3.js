webpackJsonp([3],{682:function(n,l,e){"use strict";function t(n){return _._26(0,[(n()(),_._3(0,0,null,null,9,"ion-item-divider",[["class","item item-divider"],["text-center",""]],null,[[null,"tap"]],function(n,l,e){var t=!0;if("tap"===l){t=!1!==n.component.toggleGroup(n.parent.context.$implicit.weeks)&&t}return t},I.b,I.a)),_._2(1,1097728,null,3,L.a,[F.a,j.a,_.k,_.D,[2,A.a]],null,null),_._22(335544320,5,{contentLabel:0}),_._22(603979776,6,{_buttons:1}),_._22(603979776,7,{_icons:1}),_._2(5,16384,null,0,O.a,[j.a,_.k,_.D],null,null),(n()(),_._24(-1,2,["\n      "])),(n()(),_._24(7,2,[" [","\n      — ","] (",")\n    "])),_._19(8,2),_._19(9,2)],null,function(n,l){var e=l.component;n(l,7,0,_._25(l,7,0,n(l,8,0,_._15(l.parent.parent,0),e.getRangeWeek(l.parent.context.$implicit.weeks,e.year).from,"dd/MM")),_._25(l,7,1,n(l,9,0,_._15(l.parent.parent,0),e.getRangeWeek(l.parent.context.$implicit.weeks,e.year).to,"dd/MM")),l.parent.context.$implicit.event.length)})}function u(n){return _._26(0,[(n()(),_._3(0,0,null,null,5,"button",[["class","large-icon"],["ion-button",""],["outline",""]],null,[[null,"tap"]],function(n,l,e){var t=!0;if("tap"===l){t=!1!==n.component.addFavorite(_._15(n.parent,4),n.parent.context.$implicit)&&t}return t},R.b,R.a)),_._2(1,1097728,null,0,$.a,[[8,""],j.a,_.k,_.D],{outline:[0,"outline"]},null),(n()(),_._24(-1,0,["\n            "])),(n()(),_._3(3,0,null,0,1,"ion-icon",[["name","star-outline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._2(4,147456,null,0,N.a,[j.a,_.k,_.D],{name:[0,"name"]},null),(n()(),_._24(-1,0,["\n          "]))],function(n,l){n(l,1,0,"");n(l,4,0,"star-outline")},function(n,l){n(l,3,0,_._15(l,4)._hidden)})}function a(n){return _._26(0,[(n()(),_._3(0,0,null,null,5,"button",[["class","large-icon"],["ion-button",""]],null,[[null,"tap"]],function(n,l,e){var t=!0;if("tap"===l){t=!1!==n.component.removeFavorite(_._15(n.parent,4),n.parent.context.$implicit,"Remove Favorite")&&t}return t},R.b,R.a)),_._2(1,1097728,null,0,$.a,[[8,""],j.a,_.k,_.D],null,null),(n()(),_._24(-1,0,["\n            "])),(n()(),_._3(3,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._2(4,147456,null,0,N.a,[j.a,_.k,_.D],{name:[0,"name"]},null),(n()(),_._24(-1,0,["\n          "]))],function(n,l){n(l,4,0,"close")},function(n,l){n(l,3,0,_._15(l,4)._hidden)})}function i(n){return _._26(0,[(n()(),_._3(0,0,null,null,59,"ion-list",[],[[8,"hidden",0]],null,null,null,null)),_._2(1,16384,null,0,V.a,[j.a,_.k,_.D,P.a,Y.l,G.a],null,null),(n()(),_._24(-1,null,["\n\n      "])),(n()(),_._3(3,0,null,null,55,"ion-item-sliding",[],[[8,"hidden",0]],null,null,J.b,J.a)),_._2(4,49152,[["slidingItem",4]],2,H.a,[[2,V.a],P.a,_.D,_.k,_.x],null,null),_._22(335544320,8,{item:0}),_._22(603979776,9,{_itemOptions:1}),(n()(),_._24(-1,null,["\n\n        "])),(n()(),_._3(8,0,null,0,32,"ion-item",[["class","item item-block"]],null,null,null,I.b,I.a)),_._2(9,1097728,[[8,4]],3,L.a,[F.a,j.a,_.k,_.D,[2,A.a]],null,null),_._22(335544320,10,{contentLabel:0}),_._22(603979776,11,{_buttons:1}),_._22(603979776,12,{_icons:1}),_._2(13,16384,null,0,W.a,[],null,null),(n()(),_._24(-1,2,["\n          "])),(n()(),_._3(15,0,null,0,4,"ion-thumbnail",[["item-left",""]],null,null,null,null,null)),_._2(16,16384,null,0,B.a,[],null,null),(n()(),_._24(-1,null,["\n            "])),(n()(),_._3(18,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),_._24(-1,null,["\n          "])),(n()(),_._24(-1,2,["\n          "])),(n()(),_._3(21,0,null,2,18,"button",[["class","item item-block"],["ion-item",""],["no-lines",""]],null,[[null,"tap"]],function(n,l,e){var t=!0;if("tap"===l){t=!1!==n.component.goToEventDetail(n.context.$implicit)&&t}return t},I.b,I.a)),_._2(22,1097728,[[8,4]],3,L.a,[F.a,j.a,_.k,_.D,[2,A.a]],null,null),_._22(335544320,13,{contentLabel:0}),_._22(603979776,14,{_buttons:1}),_._22(603979776,15,{_icons:1}),_._2(26,16384,null,0,W.a,[],null,null),(n()(),_._24(-1,2,["\n            "])),(n()(),_._3(28,0,null,2,1,"h3",[],null,null,null,null,null)),(n()(),_._24(29,null,["",""])),(n()(),_._24(-1,2,["\n            "])),(n()(),_._3(31,0,null,2,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(n()(),_._24(-1,2,["\n            "])),(n()(),_._3(33,0,null,2,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(n()(),_._24(-1,2,["\n            "])),(n()(),_._3(35,0,null,2,3,"p",[],null,null,null,null,null)),(n()(),_._24(36,null,[""," — ",""])),_._19(37,2),_._19(38,2),(n()(),_._24(-1,2,["\n          "])),(n()(),_._24(-1,2,["\n        "])),(n()(),_._24(-1,null,["\n\n        "])),(n()(),_._3(42,0,null,1,15,"ion-item-options",[],null,null,null,null,null)),_._2(43,16384,[[9,4]],0,U.a,[_.k,P.a],null,null),(n()(),_._24(-1,null,["\n          "])),(n()(),_._3(45,0,null,null,5,"button",[["class","large-icon"],["ion-button",""],["outline",""]],null,[[null,"tap"]],function(n,l,e){var t=!0;if("tap"===l){t=!1!==n.component.createEvent(_._15(n,4),n.context.$implicit)&&t}return t},R.b,R.a)),_._2(46,1097728,null,0,$.a,[[8,""],j.a,_.k,_.D],{outline:[0,"outline"]},null),(n()(),_._24(-1,0,["\n            "])),(n()(),_._3(48,0,null,0,1,"ion-icon",[["name","calendar"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._2(49,147456,null,0,N.a,[j.a,_.k,_.D],{name:[0,"name"]},null),(n()(),_._24(-1,0,["\n          "])),(n()(),_._24(-1,null,["\n\n          "])),(n()(),_.Y(16777216,null,null,1,null,u)),_._2(53,16384,null,0,q.j,[_.M,_.J],{ngIf:[0,"ngIf"]},null),(n()(),_._24(-1,null,["\n\n          "])),(n()(),_.Y(16777216,null,null,1,null,a)),_._2(56,16384,null,0,q.j,[_.M,_.J],{ngIf:[0,"ngIf"]},null),(n()(),_._24(-1,null,["\n        "])),(n()(),_._24(-1,null,["\n      "])),(n()(),_._24(-1,null,["\n    "]))],function(n,l){var e=l.component;n(l,46,0,"");n(l,49,0,"calendar");n(l,53,0,"all"===e.segment);n(l,56,0,"favorites"===e.segment)},function(n,l){n(l,0,0,!l.component.isGroupShown(l.parent.context.$implicit.weeks));n(l,3,0,l.context.$implicit.hidden);n(l,18,0,l.context.$implicit.iconCategory);n(l,29,0,l.context.$implicit.title);n(l,31,0,l.context.$implicit.trimmedDescription);n(l,33,0,l.context.$implicit.location);n(l,36,0,_._25(l,36,0,n(l,37,0,_._15(l.parent.parent,0),l.context.$implicit.startDate,"dd/MM/yyyy H:mm")),_._25(l,36,1,n(l,38,0,_._15(l.parent.parent,0),l.context.$implicit.endDate,"dd/MM/yyyy H:mm")));n(l,48,0,_._15(l,49)._hidden)})}function o(n){return _._26(0,[(n()(),_._3(0,0,[["eventsList",1]],null,8,"ion-list",[],[[8,"hidden",0]],null,null,null,null)),_._2(1,16384,[[1,4]],0,V.a,[j.a,_.k,_.D,P.a,Y.l,G.a],null,null),(n()(),_._24(-1,null,["\n\n    "])),(n()(),_.Y(16777216,null,null,1,null,t)),_._2(4,16384,null,0,q.j,[_.M,_.J],{ngIf:[0,"ngIf"]},null),(n()(),_._24(-1,null,["\n\n    "])),(n()(),_.Y(16777216,null,null,1,null,i)),_._2(7,802816,null,0,q.i,[_.M,_.J,_.s],{ngForOf:[0,"ngForOf"]},null),(n()(),_._24(-1,null,["\n  "]))],function(n,l){n(l,4,0,l.context.$implicit.event.length>0);n(l,7,0,l.context.$implicit.event)},function(n,l){n(l,0,0,0===l.component.shownEvents)})}function s(n){return _._26(0,[(n()(),_._3(0,0,null,null,7,"ion-list-header",[["class","item"]],null,null,null,I.b,I.a)),_._2(1,1097728,null,3,L.a,[F.a,j.a,_.k,_.D,[2,A.a]],null,null),_._22(335544320,16,{contentLabel:0}),_._22(603979776,17,{_buttons:1}),_._22(603979776,18,{_icons:1}),_._2(5,16384,null,0,Z.a,[j.a,_.D,_.k,[8,null]],null,null),(n()(),_._24(6,2,["\n    ","\n  "])),_._17(131072,h.j,[h.k,_.g])],null,function(n,l){n(l,6,0,_._25(l,6,0,_._15(l,7).transform("EVENTS.NOTHING")))})}function r(n){return _._26(0,[(n()(),_._3(0,0,null,null,9,"ion-footer",[["text-center",""]],null,null,null,null,null)),_._2(1,16384,null,0,z.a,[j.a,_.k,_.D,[2,K.a]],null,null),(n()(),_._24(-1,null,["\n  "])),(n()(),_._3(3,0,null,null,1,"ion-icon",[["name","help-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._2(4,147456,null,0,N.a,[j.a,_.k,_.D],{name:[0,"name"]},null),(n()(),_._24(-1,null,["\n  "])),(n()(),_._3(6,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),_._24(7,null,["",""])),_._17(131072,h.j,[h.k,_.g]),(n()(),_._24(-1,null,["\n"]))],function(n,l){n(l,4,0,"help-circle")},function(n,l){n(l,3,0,_._15(l,4)._hidden);n(l,7,0,_._25(l,7,0,_._15(l,8).transform("EVENTS.SWIPE")))})}function c(n){return _._26(0,[_._17(0,q.d,[_.u]),_._22(671088640,1,{eventsList:0}),(n()(),_._24(-1,null,["\n\n"])),(n()(),_._24(-1,null,["\n"])),(n()(),_._3(4,0,null,null,53,"ion-header",[],null,null,null,null,null)),_._2(5,16384,null,0,Q.a,[j.a,_.k,_.D,[2,K.a]],null,null),(n()(),_._24(-1,null,["\n  "])),(n()(),_._3(7,0,null,null,31,"ion-navbar",[["class","toolbar"],["color","event"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,X.b,X.a)),_._2(8,49152,null,0,nn.a,[ln.a,[2,K.a],[2,en.a],j.a,_.k,_.D],{color:[0,"color"]},null),(n()(),_._24(-1,3,["\n    "])),(n()(),_._3(10,0,null,0,8,"button",[["ion-button",""],["menuToggle",""]],[[8,"hidden",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==_._15(n,12).toggle()&&t}return t},R.b,R.a)),_._2(11,1097728,[[2,4]],0,$.a,[[8,""],j.a,_.k,_.D],null,null),_._2(12,1064960,null,0,tn.a,[un.a,[2,K.a],[2,$.a],[2,nn.a]],{menuToggle:[0,"menuToggle"]},null),_._2(13,16384,null,1,an.a,[j.a,_.k,_.D,[2,on.a],[2,nn.a]],null,null),_._22(603979776,2,{_buttons:1}),(n()(),_._24(-1,0,["\n      "])),(n()(),_._3(16,0,null,0,1,"ion-icon",[["name","menu"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._2(17,147456,null,0,N.a,[j.a,_.k,_.D],{name:[0,"name"]},null),(n()(),_._24(-1,0,["\n    "])),(n()(),_._24(-1,3,["\n    "])),(n()(),_._3(20,0,null,3,0,"img",[["height","28"],["src","./assets/img/s.png"]],null,null,null,null,null)),(n()(),_._24(-1,3,["\n    "])),(n()(),_._3(22,0,null,3,3,"ion-title",[],null,null,null,sn.b,sn.a)),_._2(23,49152,null,0,rn.a,[j.a,_.k,_.D,[2,on.a],[2,nn.a]],null,null),(n()(),_._24(24,0,["",""])),_._17(131072,h.j,[h.k,_.g]),(n()(),_._24(-1,3,["\n    "])),(n()(),_._3(27,0,null,2,10,"ion-buttons",[["end",""]],null,null,null,null,null)),_._2(28,16384,null,1,an.a,[j.a,_.k,_.D,[2,on.a],[2,nn.a]],null,null),_._22(603979776,3,{_buttons:1}),(n()(),_._24(-1,null,["\n      "])),(n()(),_._3(31,0,null,null,5,"button",[["ion-button",""]],null,[[null,"tap"]],function(n,l,e){var t=!0;if("tap"===l){t=!1!==n.component.presentFilter()&&t}return t},R.b,R.a)),_._2(32,1097728,[[3,4]],0,$.a,[[8,""],j.a,_.k,_.D],null,null),(n()(),_._24(-1,0,["\n        "])),(n()(),_._3(34,0,null,0,1,"ion-icon",[["name","options"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._2(35,147456,null,0,N.a,[j.a,_.k,_.D],{name:[0,"name"]},null),(n()(),_._24(-1,0,["\n      "])),(n()(),_._24(-1,null,["\n    "])),(n()(),_._24(-1,3,["\n  "])),(n()(),_._24(-1,null,["\n  "])),(n()(),_._3(40,0,null,null,16,"ion-segment",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"segment-disabled",null]],[[null,"ngModelChange"],[null,"ionChange"]],function(n,l,e){var t=!0,u=n.component;if("ngModelChange"===l){t=!1!==(u.segment=e)&&t}if("ionChange"===l){t=!1!==u.cachedOrNot()&&t}return t},null,null)),_._2(41,671744,null,0,g.n,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),_._20(2048,null,g.j,null,[g.n]),_._2(43,16384,null,0,g.k,[g.j],null,null),_._2(44,1196032,null,1,cn.a,[j.a,_.k,_.D,[2,g.j]],null,{ionChange:"ionChange"}),_._22(603979776,4,{_buttons:1}),(n()(),_._24(-1,null,["\n    "])),(n()(),_._3(47,0,null,null,3,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","all"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==_._15(n,48).onClick()&&t}return t},_n.b,_n.a)),_._2(48,114688,[[4,4]],0,dn.a,[],{value:[0,"value"]},null),(n()(),_._24(49,0,["\n      ","\n    "])),_._17(131072,h.j,[h.k,_.g]),(n()(),_._24(-1,null,["\n    "])),(n()(),_._3(52,0,null,null,3,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","favorites"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==_._15(n,53).onClick()&&t}return t},_n.b,_n.a)),_._2(53,114688,[[4,4]],0,dn.a,[],{value:[0,"value"]},null),(n()(),_._24(54,0,["\n      ","\n    "])),_._17(131072,h.j,[h.k,_.g]),(n()(),_._24(-1,null,["\n  "])),(n()(),_._24(-1,null,["\n"])),(n()(),_._24(-1,null,["\n\n"])),(n()(),_._24(-1,null,["\n"])),(n()(),_._3(60,0,null,null,22,"ion-content",[["class","feed-list"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,hn.b,hn.a)),_._2(61,4374528,null,0,gn.a,[j.a,P.a,G.a,_.k,_.D,ln.a,pn.a,_.x,[2,K.a],[2,en.a]],null,null),(n()(),_._24(-1,1,["\n  "])),(n()(),_._3(63,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,e){var t=!0;if("ionRefresh"===l){t=!1!==n.component.doRefresh(e)&&t}return t},null,null)),_._2(64,212992,null,0,fn.a,[P.a,gn.a,_.x,Y.l],null,{ionRefresh:"ionRefresh"}),(n()(),_._24(-1,null,["\n    "])),(n()(),_._3(66,0,null,null,2,"ion-refresher-content",[["pullingIcon","arrow-dropdown"],["pullingText","Pull to refresh"],["refreshingSpinner","circles"]],[[1,"state",0]],null,null,mn.b,mn.a)),_._2(67,114688,null,0,vn.a,[fn.a,j.a],{pullingIcon:[0,"pullingIcon"],pullingText:[1,"pullingText"],refreshingSpinner:[2,"refreshingSpinner"]},null),(n()(),_._24(-1,null,["\n    "])),(n()(),_._24(-1,null,["\n  "])),(n()(),_._24(-1,1,["\n  "])),(n()(),_._3(71,0,null,1,4,"ion-searchbar",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;if("ngModelChange"===l){t=!1!==(n.component.searchTerm=e)&&t}return t},bn.b,bn.a)),_._2(72,540672,null,0,g.f,[[8,null],[8,null],[8,null]],{form:[0,"form"],model:[1,"model"]},{update:"ngModelChange"}),_._20(2048,null,g.j,null,[g.f]),_._2(74,16384,null,0,g.k,[g.j],null,null),_._2(75,1294336,null,0,kn.a,[j.a,P.a,_.k,_.D,[2,g.j]],null,null),(n()(),_._24(-1,1,["\n\n  "])),(n()(),_.Y(16777216,null,1,1,null,o)),_._2(78,802816,null,0,q.i,[_.M,_.J,_.s],{ngForOf:[0,"ngForOf"]},null),(n()(),_._24(-1,1,["\n\n  "])),(n()(),_.Y(16777216,null,1,1,null,s)),_._2(81,16384,null,0,q.j,[_.M,_.J],{ngIf:[0,"ngIf"]},null),(n()(),_._24(-1,1,["\n"])),(n()(),_._24(-1,null,["\n\n"])),(n()(),_.Y(16777216,null,null,1,null,r)),_._2(85,16384,null,0,q.j,[_.M,_.J],{ngIf:[0,"ngIf"]},null),(n()(),_._24(-1,null,["\n"]))],function(n,l){var e=l.component;n(l,8,0,"event");n(l,12,0,"");n(l,17,0,"menu");n(l,35,0,"options");n(l,41,0,e.segment);n(l,48,0,"all");n(l,53,0,"favorites"),n(l,64,0);n(l,67,0,"arrow-dropdown","Pull to refresh","circles");n(l,72,0,e.searchControl,e.searchTerm),n(l,75,0);n(l,78,0,e.displayedEventsD);n(l,81,0,e.noevents&&!e.searching);n(l,85,0,"all"==e.segment)},function(n,l){var e=l.component;n(l,7,0,_._15(l,8)._hidden,_._15(l,8)._sbPadding);n(l,10,0,_._15(l,12).isHidden);n(l,16,0,_._15(l,17)._hidden);n(l,24,0,_._25(l,24,0,_._15(l,25).transform(e.title)));n(l,34,0,_._15(l,35)._hidden);n(l,40,0,_._15(l,43).ngClassUntouched,_._15(l,43).ngClassTouched,_._15(l,43).ngClassPristine,_._15(l,43).ngClassDirty,_._15(l,43).ngClassValid,_._15(l,43).ngClassInvalid,_._15(l,43).ngClassPending,_._15(l,44)._disabled);n(l,47,0,_._15(l,48)._disabled,_._15(l,48).isActive,_._15(l,48).isActive);n(l,49,0,_._25(l,49,0,_._15(l,50).transform("EVENTS.ALL")));n(l,52,0,_._15(l,53)._disabled,_._15(l,53).isActive,_._15(l,53).isActive);n(l,54,0,_._25(l,54,0,_._15(l,55).transform("EVENTS.FAV")));n(l,60,0,_._15(l,61).statusbarPadding,_._15(l,61)._hasRefresher);n(l,63,0,"inactive"!==_._15(l,64).state,_._15(l,64)._top);n(l,66,0,_._15(l,67).r.state);n(l,71,1,[_._15(l,74).ngClassUntouched,_._15(l,74).ngClassTouched,_._15(l,74).ngClassPristine,_._15(l,74).ngClassDirty,_._15(l,74).ngClassValid,_._15(l,74).ngClassInvalid,_._15(l,74).ngClassPending,_._15(l,75)._animated,_._15(l,75)._value,_._15(l,75)._isActive,_._15(l,75)._showCancelButton,_._15(l,75)._shouldAlignLeft,_._15(l,75)._isFocus])})}Object.defineProperty(l,"__esModule",{value:!0});var _=e(1),d=e(0),h=(e(56),e(55)),g=(e(393),e(219),e(29)),p=e(204),f=e(214),m=e(127),v=e(39),b=function(){function n(n,l,e,t,u,a,i,o,s,r,c,_,d){this.alertCtrl=n,this.app=l,this.navCtrl=e,this.navParams=t,this.modalCtrl=u,this.eventsService=a,this.user=i,this.toastCtrl=o,this.calendar=s,this.connService=r,this.translateService=c,this.loadingCtrl=_,this.cache=d,this.events=[],this.searching=!1,this.segment="all",this.shownEvents=0,this.searchTerm="",this.filters=[],this.excludedFilters=[],this.displayedEvents=[],this.dateRange=1,this.dateLimit=new Date,this.shownGroup=null,this.now=new Date,this.year=this.now.getFullYear(),this.noevents=!1,this.displayedEventsD=[],this.weekUCL=5,this.title=this.navParams.get("title"),this.searchControl=new g.e}return n.prototype.ionViewDidLoad=function(){var n=this;this.app.setTitle(this.title),this.updateDateLimit(),console.log(this.dateLimit),this.cachedOrNot(),this.searchControl.valueChanges.debounceTime(700).subscribe(function(l){n.searching=!1,n.updateDisplayedEvents()})},n.prototype.doRefresh=function(n){this.connService.isOnline()?(this.cache.removeItem("cache-event"),this.loadEvents("cache-event"),n.complete()):(this.connService.presentConnectionAlert(),n.complete())},n.prototype.presentLoading=function(){this.loading||(this.loading=this.loadingCtrl.create({content:"Please wait..."}),this.loading.present())},n.prototype.dismissLoading=function(){this.loading&&(this.loading.dismiss(),this.loading=null)},n.prototype.onSearchInput=function(){this.searching=!0},n.prototype.goToEventDetail=function(n){this.navCtrl.push("EventsDetailsPage",{event:n})},n.prototype.toggleGroup=function(n){this.shownGroup=this.isGroupShown(n)?null:n},n.prototype.isGroupShown=function(n){return this.shownGroup===n},n.prototype.cachedOrNot=function(){return Object(d.__awaiter)(this,void 0,void 0,function(){var n,l=this;return Object(d.__generator)(this,function(e){switch(e.label){case 0:return n="cache-event",[4,this.cache.getItem(n).then(function(n){l.presentLoading(),console.log("cached events"),l.events=n.events,l.events.forEach(function(n){n.startDate=new Date(n.startDate),n.endDate=new Date(n.endDate)}),l.shownEvents=n.shownEvents,l.filters=n.categories,l.searching=!1,l.updateDisplayedEvents()}).catch(function(){console.log("Oh no! My data is expired or doesn't exist!"),l.loadEvents(n)})];case 1:return e.sent(),[2]}})})},n.prototype.loadEvents=function(n){var l=this;this.searching=!0,this.eventsList&&this.eventsList.closeSlidingItems(),this.connService.isOnline()?(this.presentLoading(),this.eventsService.getEvents(this.segment).then(function(e){l.events=e.events,n&&l.cache.saveItem(n,e),l.shownEvents=e.shownEvents,l.filters=e.categories,l.searching=!1,l.noevents=0===l.events.length,l.updateDisplayedEvents()})):(this.searching=!1,this.navCtrl.pop(),this.connService.presentConnectionAlert())},n.prototype.changeArray=function(n,l){var e=n.reduce(function(n,l){var e=new Date(l.startDate.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4),u=1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7);return n[u]=n[u]||[],n[u].push(l),n},{}),t=Object.keys(e).map(function(n){return{weeks:n,event:e[n]}});return console.log(t),t},n.prototype.getWeek=function(n){var l=new Date(n.getTime());l.setHours(0,0,0,0),l.setDate(l.getDate()+3-(l.getDay()+6)%7);var e=new Date(l.getFullYear(),0,4);return 1+Math.round(((l.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},n.prototype.getRangeWeek=function(n,l){var e,t,u,a;return e=new Date(""+l),t=e.getDay()-1,e.setDate(e.getDate()-t),e.setDate(e.getDate()+7*(n-this.getWeek(e))),u=e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear(),e.setDate(e.getDate()+6),a=e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear(),a=a.replace(/-/g,"/"),u=u.replace(/-/g,"/"),{from:u,to:a}},n.prototype.updateDisplayedEvents=function(){var n=this;if(this.searching=!0,this.eventsList&&this.eventsList.closeSlidingItems(),"all"===this.segment)this.displayedEvents=this.events.filter(function(l){return n.excludedFilters.indexOf(l.category)<0&&l.title.toLowerCase().indexOf(n.searchTerm.toLowerCase())>-1&&Math.floor(l.startDate.getTime()/864e5)<=Math.floor(n.dateLimit.getTime()/864e5)});else if("favorites"===this.segment){var l=[];this.events.filter(function(e){(e.favorite||n.user.hasFavorite(e.guid))&&e.title.toLowerCase().indexOf(n.searchTerm.toLowerCase())>-1&&l.push(e)}),this.displayedEvents=l}this.shownEvents=this.displayedEvents.length,this.searching=!1,this.displayedEventsD=this.changeArray(this.displayedEvents,this.weekUCL),this.dismissLoading()},n.prototype.presentFilter=function(){var n=this;void 0===this.filters&&(this.filters=[]);var l=this.modalCtrl.create("EventsFilterPage",{excludedFilters:this.excludedFilters,filters:this.filters,dateRange:this.dateRange});l.present(),l.onWillDismiss(function(l){if(l){var e=l.pop();e!==n.dateRange&&(n.dateRange=e,n.updateDateLimit()),n.excludedFilters=l.pop(),n.updateDisplayedEvents()}})},n.prototype.updateDateLimit=function(){var n=new Date;this.dateLimit=new Date(n.getFullYear(),n.getMonth()+this.dateRange,n.getUTCDate()+1)},n.prototype.createEvent=function(n,l){var e,t=this;this.translateService.get("EVENTS.MESSAGE").subscribe(function(n){e=n}),this.calendar.createEventWithOptions(l.title,l.location,null,l.startDate,l.endDate,{firstReminderMinutes:15}).then(function(){t.toastCtrl.create({message:e,duration:3e3}).present(),n.close()})},n.prototype.addFavorite=function(n,l){if(this.user.hasFavorite(l.guid)){var e;this.translateService.get("EVENTS.MESSAGEFAV").subscribe(function(n){e=n}),this.removeFavorite(n,l,e)}else{this.user.addFavorite(l.guid);var t;this.translateService.get("EVENTS.MESSAGEFAV2").subscribe(function(n){t=n});this.toastCtrl.create({message:t,duration:3e3}).present(),n.close()}},n.prototype.removeFavorite=function(n,l,e){var t,u,a,i=this;this.translateService.get("EVENTS.MESSAGEFAV3").subscribe(function(n){t=n}),this.translateService.get("EVENTS.CANCEL").subscribe(function(n){u=n}),this.translateService.get("EVENTS.DEL").subscribe(function(n){a=n});this.alertCtrl.create({title:e,message:t,buttons:[{text:u,handler:function(){n.close()}},{text:a,handler:function(){i.user.removeFavorite(l.guid),i.updateDisplayedEvents(),n.close()}}]}).present()},n}(),k=function(){return function(){}}(),D=e(379),y=e(380),E=e(381),C=e(382),w=e(383),x=e(384),S=e(385),T=e(386),M=e(387),I=e(195),L=e(25),F=e(22),j=e(3),A=e(58),O=e(202),R=e(64),$=e(31),N=e(63),V=e(65),P=e(6),Y=e(10),G=e(13),J=e(708),H=e(200),W=e(87),B=e(223),U=e(134),q=e(21),Z=e(132),z=e(213),K=e(7),Q=e(194),X=e(706),nn=e(62),ln=e(12),en=e(32),tn=e(199),un=e(35),an=e(198),on=e(86),sn=e(705),rn=e(192),cn=e(206),_n=e(707),dn=e(128),hn=e(388),gn=e(33),pn=e(38),fn=e(130),mn=e(710),vn=e(203),bn=e(713),kn=e(208),Dn=e(88),yn=e(16),En=e(129),Cn=e(131),wn=e(91),xn=e(93),Sn=_._1({encapsulation:2,styles:[],data:{}}),Tn=_.Z("page-events",b,function(n){return _._26(0,[(n()(),_._3(0,0,null,null,1,"page-events",[],null,null,null,c,Sn)),_._2(1,49152,null,0,b,[Dn.a,ln.a,en.a,yn.a,En.a,f.a,v.a,Cn.a,p.a,m.a,h.k,wn.a,xn.a],null,null)],null,null)},{},{},[]),Mn=e(193),In=e(57);e.d(l,"EventsPageModuleNgFactory",function(){return Ln});var Ln=_._0(k,[],function(n){return _._11([_._12(512,_.i,_.W,[[8,[D.a,y.a,E.a,C.a,w.a,x.a,S.a,T.a,M.a,Tn]],[3,_.i],_.v]),_._12(4608,q.l,q.k,[_.u,[2,q.t]]),_._12(4608,g.s,g.s,[]),_._12(4608,g.d,g.d,[]),_._12(4608,h.g,h.f,[]),_._12(4608,h.c,h.e,[]),_._12(4608,h.i,h.d,[]),_._12(4608,h.b,h.a,[]),_._12(4608,h.k,h.k,[h.n,h.g,h.c,h.i,h.b,h.l,h.m]),_._12(512,q.b,q.b,[]),_._12(512,g.q,g.q,[]),_._12(512,g.g,g.g,[]),_._12(512,g.o,g.o,[]),_._12(512,Mn.a,Mn.a,[]),_._12(512,Mn.b,Mn.b,[]),_._12(512,h.h,h.h,[]),_._12(512,k,k,[]),_._12(256,In.a,b,[]),_._12(256,h.m,void 0,[]),_._12(256,h.l,void 0,[])])})},705:function(n,l,e){"use strict";function t(n){return u._26(2,[(n()(),u._3(0,0,null,null,2,"div",[["class","toolbar-title"]],null,null,null,null,null)),u._2(1,278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u._14(null,0)],function(n,l){n(l,1,0,"toolbar-title","toolbar-title-"+l.component._mode)},null)}e.d(l,"a",function(){return i}),l.b=t;var u=e(1),a=e(21),i=(e(192),e(3),e(86),e(62),u._1({encapsulation:2,styles:[],data:{}}))},706:function(n,l,e){"use strict";function t(n){return u._26(0,[(n()(),u._3(0,0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),u._2(1,278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),u._3(2,0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.backButtonClick(e)&&t}return t},i.b,i.a)),u._2(3,278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u._2(4,1097728,null,0,o.a,[[8,"bar-button"],s.a,u.k,u.D],null,null),(n()(),u._3(5,0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),u._2(6,278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u._2(7,147456,null,0,r.a,[s.a,u.k,u.D],{name:[0,"name"]},null),(n()(),u._3(8,0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),u._2(9,278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),u._24(10,null,["",""])),u._14(null,0),u._14(null,1),u._14(null,2),(n()(),u._3(14,0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),u._2(15,278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u._14(null,3)],function(n,l){var e=l.component;n(l,1,0,"toolbar-background","toolbar-background-"+e._mode);n(l,3,0,"back-button","back-button-"+e._mode);n(l,6,0,"back-button-icon","back-button-icon-"+e._mode);n(l,7,0,e._bbIcon);n(l,9,0,"back-button-text","back-button-text-"+e._mode);n(l,15,0,"toolbar-content","toolbar-content-"+e._mode)},function(n,l){var e=l.component;n(l,2,0,e._hideBb);n(l,5,0,u._15(l,7)._hidden);n(l,10,0,e._backText)})}e.d(l,"a",function(){return c}),l.b=t;var u=e(1),a=e(21),i=e(64),o=e(31),s=e(3),r=e(63),c=(e(62),e(12),e(7),e(32),u._1({encapsulation:2,styles:[],data:{}}))},707:function(n,l,e){"use strict";function t(n){return u._26(0,[u._14(null,0),(n()(),u._3(1,0,null,null,0,"div",[["class","button-effect"]],null,null,null,null,null))],null,null)}e.d(l,"a",function(){return a}),l.b=t;var u=e(1),a=(e(128),u._1({encapsulation:2,styles:[],data:{}}))},708:function(n,l,e){"use strict";function t(n){return u._26(2,[(n()(),u._24(-1,null,["\n    "])),u._14(null,0),(n()(),u._24(-1,null,["\n    "])),u._14(null,1),(n()(),u._24(-1,null,["\n  "]))],null,null)}e.d(l,"a",function(){return a}),l.b=t;var u=e(1),a=(e(200),e(65),e(6),u._1({encapsulation:2,styles:[],data:{}}))},710:function(n,l,e){"use strict";function t(n){return o._26(0,[(n()(),o._3(0,0,null,null,2,"div",[["class","refresher-pulling-icon"]],null,null,null,null,null)),(n()(),o._3(1,0,null,null,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),o._2(2,147456,null,0,s.a,[r.a,o.k,o.D],{name:[0,"name"]},null)],function(n,l){n(l,2,0,l.component.pullingIcon)},function(n,l){n(l,1,0,o._15(l,2)._hidden)})}function u(n){return o._26(0,[(n()(),o._3(0,0,null,null,0,"div",[["class","refresher-pulling-text"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(n,l){n(l,0,0,l.component.pullingText)})}function a(n){return o._26(0,[(n()(),o._3(0,0,null,null,0,"div",[["class","refresher-refreshing-text"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(n,l){n(l,0,0,l.component.refreshingText)})}function i(n){return o._26(0,[(n()(),o._3(0,0,null,null,4,"div",[["class","refresher-pulling"]],null,null,null,null,null)),(n()(),o.Y(16777216,null,null,1,null,t)),o._2(2,16384,null,0,c.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(n()(),o.Y(16777216,null,null,1,null,u)),o._2(4,16384,null,0,c.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(n()(),o._3(5,0,null,null,5,"div",[["class","refresher-refreshing"]],null,null,null,null,null)),(n()(),o._3(6,0,null,null,2,"div",[["class","refresher-refreshing-icon"]],null,null,null,null,null)),(n()(),o._3(7,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,_.b,_.a)),o._2(8,114688,null,0,d.a,[r.a,o.k,o.D],{name:[0,"name"]},null),(n()(),o.Y(16777216,null,null,1,null,a)),o._2(10,16384,null,0,c.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.pullingIcon);n(l,4,0,e.pullingText);n(l,8,0,e.refreshingSpinner);n(l,10,0,e.refreshingText)},function(n,l){n(l,7,0,o._15(l,8)._paused)})}e.d(l,"a",function(){return h}),l.b=i;var o=e(1),s=e(63),r=e(3),c=e(21),_=e(389),d=e(90),h=(e(203),e(130),o._1({encapsulation:2,styles:[],data:{}}))},713:function(n,l,e){"use strict";function t(n){return u._26(0,[u._22(402653184,1,{_searchbarInput:0}),u._22(402653184,2,{_searchbarIcon:0}),u._22(402653184,3,{_cancelButton:0}),(n()(),u._3(3,0,null,null,8,"div",[["class","searchbar-input-container"]],null,null,null,null,null)),(n()(),u._3(4,0,null,null,3,"button",[["class","searchbar-md-cancel"],["clear",""],["color","dark"],["ion-button",""],["mode","md"],["type","button"]],null,[[null,"click"],[null,"mousedown"]],function(n,l,e){var t=!0,u=n.component;if("click"===l){t=!1!==u.cancelSearchbar(e)&&t}if("mousedown"===l){t=!1!==u.cancelSearchbar(e)&&t}return t},a.b,a.a)),u._2(5,1097728,null,0,i.a,[[8,""],o.a,u.k,u.D],{color:[0,"color"],mode:[1,"mode"],clear:[2,"clear"]},null),(n()(),u._3(6,0,null,0,1,"ion-icon",[["name","md-arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),u._2(7,147456,null,0,s.a,[o.a,u.k,u.D],{name:[0,"name"]},null),(n()(),u._3(8,0,[[2,0],["searchbarIcon",1]],null,0,"div",[["class","searchbar-search-icon"]],null,null,null,null,null)),(n()(),u._3(9,0,[[1,0],["searchbarInput",1]],null,0,"input",[["class","searchbar-input"],["dir","auto"]],[[1,"placeholder",0],[1,"type",0],[1,"autocomplete",0],[1,"autocorrect",0],[1,"spellcheck",0]],[[null,"input"],[null,"blur"],[null,"focus"]],function(n,l,e){var t=!0,u=n.component;if("input"===l){t=!1!==u.inputChanged(e)&&t}if("blur"===l){t=!1!==u.inputBlurred()&&t}if("focus"===l){t=!1!==u.inputFocused()&&t}return t},null,null)),(n()(),u._3(10,0,null,null,1,"button",[["class","searchbar-clear-icon"],["clear",""],["ion-button",""],["type","button"]],null,[[null,"click"],[null,"mousedown"]],function(n,l,e){var t=!0,u=n.component;if("click"===l){t=!1!==u.clearInput(e)&&t}if("mousedown"===l){t=!1!==u.clearInput(e)&&t}return t},a.b,a.a)),u._2(11,1097728,null,0,i.a,[[8,""],o.a,u.k,u.D],{mode:[0,"mode"],clear:[1,"clear"]},null),(n()(),u._3(12,0,[[3,0]],null,2,"button",[["class","searchbar-ios-cancel"],["clear",""],["ion-button",""],["mode","ios"],["type","button"]],[[8,"tabIndex",0]],[[null,"click"],[null,"mousedown"]],function(n,l,e){var t=!0,u=n.component;if("click"===l){t=!1!==u.cancelSearchbar(e)&&t}if("mousedown"===l){t=!1!==u.cancelSearchbar(e)&&t}return t},a.b,a.a)),u._2(13,1097728,[["cancelButton",4]],0,i.a,[[8,""],o.a,u.k,u.D],{mode:[0,"mode"],clear:[1,"clear"]},null),(n()(),u._24(14,0,["",""]))],function(n,l){var e=l.component;n(l,5,0,"dark","md","");n(l,7,0,"md-arrow-back");n(l,11,0,e._mode,"");n(l,13,0,"ios","")},function(n,l){var e=l.component;n(l,6,0,u._15(l,7)._hidden);n(l,9,0,e.placeholder,e.type,e._autocomplete,e._autocorrect,e._spellcheck);n(l,12,0,e._isActive?1:-1);n(l,14,0,e.cancelButtonText)})}e.d(l,"a",function(){return r}),l.b=t;var u=e(1),a=e(64),i=e(31),o=e(3),s=e(63),r=(e(208),e(6),e(29),u._1({encapsulation:2,styles:[],data:{}}))}});